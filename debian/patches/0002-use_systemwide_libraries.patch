From: Kevin Roy <kiniou@gmail.com>
Date: Tue, 28 Sep 2010 15:00:23 +0200
Subject: [PATCH] use_systemwide_libraries

Don't try and use extern/libopenjpeg nor extern/glew
---
 CMakeLists.txt        |    6 ++++++
 extern/CMakeLists.txt |    6 ------
 2 files changed, 6 insertions(+), 6 deletions(-)

diff --git a/CMakeLists.txt b/CMakeLists.txt
index cf775ac..c759c11 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -317,7 +317,13 @@ IF(UNIX AND NOT APPLE)
 		SET(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -fopenmp")
 	ENDIF(WITH_OPENMP)
 
+	# Use system-wide GLEW:
+	SET(LLIBS "${LLIBS} -lGLEW")
+	SET(LLIBS "${LLIBS} -lopenjpeg")
+	ADD_DEFINITIONS(-DWITH_OPENJPEG)
+
 	SET(PLATFORM_CFLAGS "-pipe -fPIC -funsigned-char -fno-strict-aliasing")
+	SET(PLATFORM_CFLAGS "-pipe -fPIC -funsigned-char -fno-strict-aliasing -Wno-char-subscripts")
 
 	SET(PLATFORM_LINKFLAGS "-pthread")
 
diff --git a/extern/CMakeLists.txt b/extern/CMakeLists.txt
index f643b68..349df06 100644
--- a/extern/CMakeLists.txt
+++ b/extern/CMakeLists.txt
@@ -35,12 +35,6 @@ IF(CMAKE_SYSTEM_NAME MATCHES "Linux")
 	ADD_SUBDIRECTORY(binreloc)
 ENDIF(CMAKE_SYSTEM_NAME MATCHES "Linux")
 
-ADD_SUBDIRECTORY(glew)
-
-IF(WITH_IMAGE_OPENJPEG)
-	ADD_SUBDIRECTORY(libopenjpeg)
-ENDIF(WITH_IMAGE_OPENJPEG)
-
 IF(WITH_LZO)
 	ADD_SUBDIRECTORY(lzo)
 ENDIF(WITH_LZO)
-- 
