From: Kevin Roy <kiniou@gmail.com>
Date: Mon, 30 Jul 2012 10:53:09 +0200
Subject: blender_thumbnailer

* Move thumbnailer script to an appropriate destination
* Add blender.thumbnailer file
* Change to python 3.3 since lintian is messing around with that

Signed-off-by: Matteo F. Vescovi <mfv.debian@gmail.com>
---
 blender.thumbnailer                | 4 ++++
 release/bin/blender-thumbnailer.py | 4 ++--
 source/creator/CMakeLists.txt      | 2 +-
 3 files changed, 7 insertions(+), 3 deletions(-)
 create mode 100644 blender.thumbnailer

diff --git a/blender.thumbnailer b/blender.thumbnailer
new file mode 100644
index 0000000..05d4fae
--- /dev/null
+++ b/blender.thumbnailer
@@ -0,0 +1,4 @@
+[Thumbnailer Entry]
+TryExec=/usr/share/blender/scripts/blender-thumbnailer.py
+Exec=/usr/share/blender/scripts/blender-thumbnailer.py %i %o
+MimeType=application/x-blender;
diff --git a/release/bin/blender-thumbnailer.py b/release/bin/blender-thumbnailer.py
index 8b93eeb..6c2cf23 100755
--- a/release/bin/blender-thumbnailer.py
+++ b/release/bin/blender-thumbnailer.py
@@ -1,4 +1,4 @@
-#!/usr/bin/python
+#!/usr/bin/python3
 
 # ##### BEGIN GPL LICENSE BLOCK #####
 #
@@ -24,7 +24,7 @@
 Thumbnailer runs with python 2.6 and 3.x.
 To run automatically with nautilus:
    gconftool --type boolean --set /desktop/gnome/thumbnailers/application@x-blender/enable true
-   gconftool --type string --set /desktop/gnome/thumbnailers/application@x-blender/command "blender-thumbnailer.py %u %o"
+   gconftool --type string --set /desktop/gnome/thumbnailers/application@x-blender/command "/usr/share/blender/scripts/blender-thumbnailer.py %i %o"
 """
 
 import struct
diff --git a/source/creator/CMakeLists.txt b/source/creator/CMakeLists.txt
index 8ff4ec4..6645d36 100644
--- a/source/creator/CMakeLists.txt
+++ b/source/creator/CMakeLists.txt
@@ -406,7 +406,7 @@ if(UNIX AND NOT APPLE)
 		)
 		install(
 			PROGRAMS ${CMAKE_SOURCE_DIR}/release/bin/blender-thumbnailer.py
-			DESTINATION ${CMAKE_INSTALL_PREFIX}/bin
+			DESTINATION ${CMAKE_INSTALL_PREFIX}/share/blender/scripts
 		)
 		install(
 			FILES ${CMAKE_SOURCE_DIR}/doc/manpage/blender.1
